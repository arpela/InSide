<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:fmt="http://java.sun.com/jsp/jstl/fmt"
   	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:rich="http://richfaces.org/rich">

<h:body>
	
	<ui:composition template="/layout/templateapp.xhtml">
		
		<ui:define name="body">
			<f:loadBundle basename="uy.com.s4b.inside.ui.bundle.MessagesResource" var="bundle" />
			
			<h:form id="formHome">

				<div id="content">
					<div class="state">
						<div class="page fleft">Home</div>
						<div class="date fright"><span id="reloj"></span></div>
						<div class="clear"></div>
					</div>

					<div class="leftContent fleft">
						<div class="subtitle">
							<div class="options"
								style="width: 180px; margin-top: 0; margin-bottom: 0px">
								Esquema
							</div>
						</div>
						
						<div id="contenido_1">
							<table>
								<tr style="height: 26px;">
									<th width="201" style="border-bottom: 1px #bababa solid;">Network / Site / Zone / Node</th>
									<th width="83" style="border-bottom: 1px #bababa solid;">&nbsp;</th>
									<th width="77" style="border-bottom: 1px #bababa solid;">&nbsp;</th>
									<th width="106" style="border-bottom: 1px #bababa solid;">&nbsp;</th>
								</tr>
								
								<h:outputText value="#{versionBakingBean.treeNetworkHome}" escape="false"/>
							</table>
						</div>


						<script type="text/javascript">
							$('ul.expand li').click(function(){
				              next = $(this).next('ul.expand');
				              if ($(this).hasClass('less')){
				                $(next).slideUp();
				                $(this).removeClass('less');
				                $(this).addClass('more');
				              }else{
				                $(next).slideDown();
				                $(this).addClass('less');
				                $(this).removeClass('more');
				              }
				            })
				            
				            $("a[id^='VERTODO']").each(function() {
								var id = parseInt(this.id.replace("VERTODO", ""));
								$('#VERTODO'+id).openDOMWindow({
									height:600,
									width:990,
									anchoredClassName:'cerrar', 
									positionType:'absolute',
									positionTop:50,
									eventType:'click',
									positionLeft:50,
									windowSource:'iframe',
									windowPadding:0,
									loader:1,
									loaderHeight:16,
									loaderWidth:17
								});
							});
           				</script>
           				
						<div class="options">
							<div class="fright button">
								<a href="#">Ayuda</a>
							</div>
							<div class="clear"></div>
						</div>
						
						<div class="subtitle">Ultimos cambios:</div>
							<rich:dataTable border="0" styleClass="changes" value="#{versionBakingBean.listaUltimasVersiones}" 
								var="version" id="listaVersiones" rows="5" rowClasses="dark" columns="3" style="width: 460;">
								<rich:column>
									<f:facet name="header">
										<h:outputText value="Equipos"/>
									</f:facet>
									<h:outputText value="#{version.oneDevice.hostname}" />
								</rich:column>
								<rich:column>
									<f:facet name="header">
										<h:outputText value="Fecha / Hora"/>
									</f:facet>
									<h:outputText value="#{version.date.time}" >
										<f:convertDateTime pattern="dd/MM/yyyy HH:mm:ss" type="date" timeZone="America/Montevideo" />
									</h:outputText>
								</rich:column>
								<rich:column>
									<f:facet name="header">
										<h:outputText value="Equipos"/>
									</f:facet>
									<h:commandLink action="#{versionBakingBean.selectVersionHome}" value="Ver reporte" styleClass="links_modal" >
											<f:param name="id" value="#{version.id}"/>
									</h:commandLink>
								</rich:column>
							</rich:dataTable>
						<div class="options">
							<div class="fright button">
								<a href="#">Ayuda</a>
							</div>
							<div class="clear"></div>
						</div>
					</div>
					
					
					<div class="rightContent fright" >
						<div class="subtitle">Panel de alarmas:</div>
						<h:outputText value="#{events.homeListaEvento}" escape="false"/>
					</div>
					<div class="clear"></div>
				</div>
			</h:form>
			
			
			
		</ui:define>
	</ui:composition>
</h:body>

</html>

